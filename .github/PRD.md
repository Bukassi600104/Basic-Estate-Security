# Basic Security – Product Requirements Document (PRD)
**Version:** 2.1 (PWA-Enhanced)  
**Product Type:** Multi-tenant SaaS  
**Target Market:** Residential Estates & Gated Communities (Nigeria-first)

---

## 1. Product Overview

**Basic Security** is a secure visitor access and logging platform designed for residential estates. It replaces manual gate logbooks and insecure phone confirmations with time-bound, verifiable access codes generated by residents and validated by security personnel.

The system operates as a **multi-tenant SaaS**, where each estate is an isolated tenant managed by estate administrators and overseen by a Super Admin (platform owner).

The platform uses **Progressive Web Apps (PWAs)** for residents and security personnel. These PWAs are hosted within the same web application but function as **standalone installable apps** on mobile devices.

---

## 2. Problems the Product Solves

- Unauthorized visitor entry due to impersonation
- Manual visitor logbooks that are inaccurate or incomplete
- Difficulty verifying unexpected visitors in real time
- Abuse of shared security phone numbers
- No reliable audit trail of visitor movement
- Poor scalability of traditional estate security processes

---

## 3. Key Product Decisions (Locked)

- PWA-first architecture
- No dependency on Telegram or third-party messaging platforms
- Two standalone PWAs:
  - **Resident PWA**
  - **Security PWA**
- PWAs are:
  - Hosted within the same web app
  - Hidden from public navigation
  - Accessible only via admin-issued links or invite tokens
  - Installed and launched in standalone mode (no browser UI)
- Internet access is mandatory
- One-time and recurring access codes supported
- AWS-only infrastructure

---

## 4. User Roles

### 4.1 Super Admin (Platform Owner)
- Create, activate, suspend, or delete estates (tenants)
- Manage subscription plans and billing status
- Disable tenant access for non-payment
- View platform-wide analytics and audit logs

### 4.2 Estate Admin (Estate Exco / Management)
- Onboard residents eligible for the service
- Register and manage security personnel or devices
- Generate and distribute PWA install links
- Send resident invites via email or messaging
- View and export estate visitor logs
- Suspend or reactivate resident access

### 4.3 Resident
- Generate visitor access codes
- Create recurring access for house-helps or regular visitors
- View, manage, and revoke active codes
- View visit history
- Use up to two approved phone numbers per household

### 4.4 Security Personnel
- Validate visitor access codes at the gate
- View resident name and house/unit details
- Automatically log all visitor entries
- Operate using shared or dedicated gate devices

---

## 5. Application Architecture

### 5.1 Frontend Components
- Public Website (marketing + authentication)
- Estate Admin Dashboard
- Super Admin Dashboard
- **Resident PWA** (`/resident-app`)
- **Security PWA** (`/security-app`)

Only the Admin dashboards are accessible through the main website navigation.

### 5.2 Backend & Infrastructure
- Next.js 14 (App Router) serving both UI and API routes
- AWS Amplify Hosting (SSR target)
- Authentication: AWS Cognito User Pool (JWT session stored in secure cookie)
- Persistence: DynamoDB (multi-table, tenant-isolated)
- AWS CloudWatch for logging and monitoring

Notes:
- Admin dashboards are server-rendered pages.
- Resident/Security apps are installable PWAs hosted in the same Next.js app.

---

## 6. Progressive Web App (PWA) Design

### General Requirements
- Each PWA has its own `manifest.json`
- `display: standalone` to remove browser UI
- Service worker enabled for installability
- No links back to the main website
- Protected routes with server-side authentication
- Optimized for low-end Android devices

### Distribution
- Install links generated within the Estate Admin dashboard
- Admins can copy and forward install links to approved users
- Optional email-based invitations with install instructions

---

## 7. Resident PWA – Functional Requirements

### Authentication
- Cognito sign-in (username + password)
- Accounts are provisioned by the Estate Admin (or Super Admin) in Cognito
- Role is enforced via Cognito claims (`RESIDENT` / `RESIDENT_DELEGATE`)

### Features
- Generate one-time visitor access codes (guest)
- Generate long-lived access codes for staff/regular visitors (renewable)
- Automatic expiration of guest codes
- Revoke active codes at any time
- View visit and validation history

### Constraints
- Guest codes expire after a maximum of 6 hours (or on first successful validation)
- Staff codes have long validity (up to ~6 months) and successful validation does not automatically expire them
- Residents cannot change phone numbers without admin approval

---

## 8. Security PWA – Functional Requirements

### Authentication
- Admin-provisioned credentials or device-based access tokens
- Role restricted to security personnel only

### Features
- Manual access code entry
- Real-time validation feedback
- Clear visual indicators (valid / invalid)
- Display resident name and house address
- Automatic creation of visitor logs upon successful validation

### Constraints
- Codes cannot be reused
- Expired or invalid codes are blocked
- Session timeout enforced for shared devices

---

## 9. Visitor Code System

### Code Types
- Guest access codes (one-time)
- Staff access codes (long-lived / renewable)

### Code Properties
- Linked to a specific resident and estate
- Time-bound with enforced expiry
- Guest codes are single-use (expire on successful validation)
- Staff codes are reusable until expiry/renewal
- Every validation attempt is logged (success/failure, timestamp, gate snapshot, failure reason on failure)

---

## 10. Multi-Tenancy Rules

- Each estate is fully isolated
- No data sharing between estates
- Suspending an estate disables all PWAs instantly
- Deleting an estate permanently revokes all access

---

## 11. Security & Compliance

- HTTPS enforced across all services
- Secure, httpOnly cookies for session handling
- Role-based access control (RBAC)
- Full audit trail of logins and validations
- Admin actions are auditable (activity log)
- Admin-controlled session and device revocation
- No offline validation permitted

---

## 12. Super Admin Dashboard (Operational Requirements)

### Estates
- View estates with tenant lifecycle management (activate/suspend/terminate)
- Estates list supports pagination with a “Load more” action

### Estate Detail
- View recent validations with CSV export
- View estate activity feed
- View resident and guard lists
- Validations, activity, residents, and guards lists support pagination with a “Load more” action

---

## 13. Subscription & Billing (Summary)

- Estates pay for the service (not individual residents)
- Pricing is tiered based on estate size
- Billing status directly controls tenant activation

---

## 14. MVP Scope

- Super Admin Dashboard
- Estate Admin Dashboard
- Resident PWA
- Security PWA
- One-time and recurring code generation
- Manual code validation
- Visitor logging and audit trail

---

## 15. Out of Scope (Future Enhancements)

- QR code scanning
- Native Android/iOS applications
- WhatsApp or SMS interfaces
- Offline validation
- Advanced analytics dashboards

---

## 16. Success Metrics

- Reduction in unauthorized visitor entries
- Adoption rate per estate
- Monthly recurring revenue (MRR)
- System uptime and performance reliability

---

## 17. Risks & Mitigation

| Risk | Mitigation |
|-----|-----------|
| Poor device performance | Lightweight PWA design |
| Internet outages | Enforce online-only policy |
| Shared security devices | Session timeout and logging |
| User adoption resistance | Admin-led onboarding |

---

## 18. Conclusion

Basic Security is designed as a scalable, secure, and estate-friendly visitor access platform. The PWA-first approach provides full control over user experience, removes third-party dependencies, and positions the product for long-term growth and enterprise adoption.
